<!doctype html>
<html lang="en">
  <head>
    <title>&lt;tv-program&gt; web component</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
      @media (min-width: 601px) {
        body {
          width: 600px;
          margin: 8px auto;
        }
      }

      pre { white-space: pre-wrap; }
      form { margin-bottom: 1em; }

      #device {
        width: 40%;
        margin: 0 auto;
      }

      @media (max-width: 450px) {
        #device { width: 90%; }
      }
    </style>
  </head>

  <body>
    <h1>&lt;tv-program&gt; web component</h1>

    <p><a href="https://github.com/gromnitsky/tv-program">Github</a></p>

    <form>
      Select device: <select></select>, hover for "snow", click to pause.
    </form>

    <div id="device"></div>

    <p>HTML code:</p>

    <pre id="example"></pre>

    <script type="module">
      import {devices} from './tv-program/tv-program.js'

      let device = document.querySelector('#device')
      let select = document.querySelector('select')
      select.innerHTML = Object.keys(devices).map( dev => {
          return `<option value="${dev}">${dev}</option>`
      }).join`\n`
      select.onchange = evt => inject_device(evt.target.value)

      function inject_device(name) {
          device.innerHTML = `<tv-program debug="true" device="${name}"></tv-program>`
          device.querySelector('tv-program')
              .addEventListener('device-frame-load', fix_device_height)
          document.querySelector('#example').innerText = `<tv-program device="${name}"></tv-program>`
      }

      function fix_device_height(evt) {
          device.style.height = `${evt.detail.target.height}px`
      }
      addEventListener("resize", fix_device_height)

      inject_device("crt tv with antenna")
    </script>

  </body>
</html>
